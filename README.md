# X推文收藏助手 Chrome插件

一个用于收藏X.com（Twitter）推文并使用AI生成日报的Chrome浏览器扩展。

## 功能特性

- 📌 **一键收藏**: 在X.com上直接点击按钮收藏推文
- 📅 **日期分组**: 自动按收藏日期分组显示（今天/昨天/具体日期）
- 🏷️ **标签管理**: 为推文添加标签，支持按标签筛选
- 🤖 **AI日报**: 使用AI生成每日收藏推文的整理日报
- 📤 **数据导出**: 导出收藏数据为JSON文件
- ⌨️ **快捷键支持**: 快速收藏推文和打开收藏列表
- 🌙 **深色模式**: 自动适配系统深色模式
- ⚙️ **自定义API**: 支持配置多种AI API服务
- 📋 **一键复制**: 快速复制生成的日报内容
- 🔒 **本地存储**: 所有数据存储在本地，保护隐私

## 安装方法

### 方式一：开发者模式安装（推荐用于测试）

1. 下载或克隆此项目到本地
2. 打开Chrome浏览器，访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目根目录
6. 插件安装完成！

### 方式二：打包安装

1. 在 `chrome://extensions/` 页面
2. 点击"打包扩展程序"
3. 选择项目根目录
4. 生成.crx文件后拖拽到浏览器安装

## 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Alt+Shift+X` (Mac: `Command+Shift+X`) | 打开收藏列表 |
| `Alt+S` (Mac: `Command+S`) | 收藏/取消收藏当前可见推文 |

## 使用指南

### 1. 收藏推文

1. 访问 [X.com](https://x.com)
2. 浏览推文时，每条推文下方会显示一个收藏按钮（书签图标）
3. 点击按钮即可收藏，再次点击取消收藏
4. 或使用快捷键 `Alt+S` 快速收藏当前页面的主推文

### 2. 查看收藏列表

1. 点击浏览器工具栏的插件图标，或使用快捷键 `Alt+Shift+X`
2. 查看所有收藏的推文，按日期分组显示
3. 点击推文可跳转到原链接
4. 支持按标签筛选推文

### 3. 标签管理

1. 在推文卡片上点击"添加标签"按钮
2. 输入标签名称后按回车确认
3. 可以为同一推文添加多个标签
4. 使用顶部的标签过滤器快速筛选

### 4. 生成AI日报

1. 首先需要配置AI API（见下方配置说明）
2. 在插件弹窗中点击"生成今日日报"按钮
3. 等待AI生成完成
4. 查看生成的日报内容
5. 点击"复制日报"按钮复制到剪贴板

### 5. 导出数据

1. 在收藏列表中点击"导出"按钮
2. 收藏数据将导出为JSON文件
3. 可用于备份或数据迁移

### 6. 配置AI API

1. 点击插件弹窗右上角的设置图标
2. 填写以下信息：
   - **API Endpoint**: API的完整URL地址
   - **API Key**: 您的API密钥
   - **Model**: 要使用的模型名称
   - **System Prompt**: 自定义AI助手的角色（可选）
3. 使用预设快速配置常用服务商：
   - 智谱AI
   - OpenAI
   - Anthropic
4. 点击"测试连接"验证配置
5. 点击"保存设置"完成配置

## 数据存储

所有数据都存储在本地浏览器的 `chrome.storage.local` 中，包括：
- 收藏的推文列表
- 标签数据
- AI API配置信息

**注意**: API Key存储在本地，不会上传到任何服务器。

## 支持的AI服务

本插件支持多种AI API服务：

- ✅ **智谱AI** (GLM-4) - 推荐使用，国内访问快
- ✅ **OpenAI** (GPT-4, GPT-3.5)
- ✅ **Anthropic** (Claude 3, Claude 3.5)
- ✅ 任何兼容OpenAI格式的API服务

### 智谱AI配置示例

- **API Endpoint**: `https://open.bigmodel.cn/api/paas/v4/chat/completions`
- **Model**: `glm-4` 或 `glm-4-flash`
- **获取API Key**: 访问 [智谱AI开放平台](https://open.bigmodel.cn/)

## 项目结构

```
ai-x-chajian/
├── manifest.json              # Chrome插件配置文件 (Manifest V3)
├── src/
│   ├── content/
│   │   └── content.js         # 注入X.com的内容脚本
│   ├── popup/
│   │   ├── popup.html         # 弹窗页面
│   │   ├── popup.js           # 弹窗逻辑
│   │   └── popup.css          # 弹窗样式
│   ├── background/
│   │   └── serviceWorker.js   # 后台服务（数据存储、AI调用）
│   ├── options/
│   │   ├── options.html       # 设置页面
│   │   ├── options.js         # 设置逻辑
│   │   └── options.css        # 设置样式
│   └── styles/
│       └── content.css        # 收藏按钮样式（含深色模式）
├── icons/                     # 插件图标
└── README.md
```

## 技术栈

- **Manifest V3**: Chrome最新扩展规范
- **Vanilla JavaScript**: 无框架依赖，轻量高效
- **Chrome Storage API**: 本地数据存储
- **MutationObserver**: 动态检测页面推文
- **Fetch API**: AI API调用
- **Runtime Messages**: 组件间通信

## 架构设计

```
┌─────────────────────────────────────────────────────────────┐
│                        X.com Page                            │
│  ┌──────────────┐                                           │
│  │ Content      │ ← MutationObserver监听新推文              │
│  │ Script       │ ← 提取推文数据                            │
│  │              │ ← 注入收藏按钮                            │
│  └──────┬───────┘                                           │
│         │ chrome.storage.local (读写收藏)                   │
└─────────┼───────────────────────────────────────────────────┘
          │
          ▼
┌─────────────────────────────────────────────────────────────┐
│              Chrome Storage Local                            │
│  - tweets: [{id, content, author, tags, savedAt, ...}]     │
│  - settings: {apiEndpoint, apiKey, model, systemPrompt}    │
└─────────────────────────────────────────────────────────────┘
          ▲                           ▼
┌───────────────────┐      ┌──────────────────────────────────┐
│    Popup UI       │      │  Background Service Worker       │
│  - 展示推文列表    │◄─────│  - AI日报生成                    │
│  - 标签筛选        │      │  - API适配（OpenAI/智谱/Claude） │
│  - 导出数据        │      │  - 消息路由                      │
│  - 删除收藏        │      │  - 快捷键处理                    │
└───────────────────┘      └──────────────────────────────────┘
```

## 注意事项

1. **API费用**: 使用AI API可能会产生费用，请注意使用量
2. **API安全**: API Key存储在本地，请勿泄露
3. **网络要求**: 需要能访问AI API服务器
4. **X.com更新**: X.com页面结构变化可能影响插件功能
5. **数据备份**: 建议定期导出数据进行备份

## 常见问题

### Q: 收藏按钮不显示？
A: 请确保您在x.com或twitter.com域名下，刷新页面后重试。

### Q: 生成日报失败？
A: 请检查：
- API Key是否正确
- API Endpoint是否正确
- 网络连接是否正常
- API账户是否有足够余额

### Q: 数据会同步吗？
A: 目前数据仅存储在本地，不会跨设备同步。建议使用导出功能进行备份。

### Q: 支持哪些模型？
A: 支持任何兼容OpenAI API格式的模型，包括GPT-4、Claude、GLM-4等。

### Q: 快捷键不生效？
A: 请确保：
- 扩展已正确安装
- 没有与其他软件的快捷键冲突
- 在Chrome快捷键设置中检查扩展快捷键是否正确配置

## 更新日志

### v1.2.0 (最新)
- ✨ 新增深色模式支持
- ✨ 新增快捷键功能
- ✨ 新增标签管理和筛选功能
- ✨ 新增数据导出功能

### v1.1.0
- ✨ 新增AI日报生成功能
- ✨ 支持多种AI API配置

### v1.0.0
- 🎉 初始版本发布
- ✨ 基础收藏功能

## 开发计划

- [ ] 支持全文搜索
- [ ] 支持自定义日期范围生成日报
- [ ] 支持数据导入功能
- [ ] 支持跨设备同步（chrome.storage.sync）

## 贡献

欢迎提交Issue和Pull Request！

## 许可证

MIT License

## 免责声明

本插件仅供个人学习使用，请勿用于商业用途。使用AI API产生的费用由用户自行承担。
